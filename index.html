<!DOCTYPE html>
<html>
    <head>
        <title>TUSCRIPT</title>

        <!-- meta information -->
        <meta name="author" content="Thomas Kollatz" />
        <meta charset="utf-8" />
        <meta name="viewport" content="width=1024" />
        <meta name="apple-mobile-web-app-capable" content="yes" />

        <!-- favicons -->
        <link rel="shortcut icon" href="resources/img/favicon.png" />
        <link rel="apple-touch-icon" href="resources/img/apple-touch-icon.png" />

        <!-- CSS reset and grid -->
        <link href="vendor/normalize/normalize-4.1.1.css" rel="stylesheet" />
        <link href="vendor/skeleton/skeleton-2.0.4.css" rel="stylesheet" />

        <!-- fonts -->
        <link
            href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,600,600italic,400italic,700italic,800,800italic&amp;subset=latin,latin-ext"
            rel="stylesheet" type="text/css" />

        <!-- styles for included libraries -->

        <!-- chartist -->
        <link rel="stylesheet" href="vendor/chartist/chartist.min-0.9.7.css" />

        <!-- unite gallery -->
        <link rel="stylesheet" href="vendor/unitegallery/css/unite-gallery.css" type="text/css" />

        <!-- codemirror -->
        <link rel="stylesheet" href="vendor/codemirror/lib/codemirror.css" />

        <!-- highlight -->
        <link rel="stylesheet" href="vendor/highlight/styles/default.css" />
        <link rel="stylesheet" href="resources/css/hljs.linenumbering.css" />

        <!-- swiper -->
        <link rel="stylesheet" href="vendor/swiper/swiper.min.css" />


        <!-- magnific popup -->
        <link rel="stylesheet" href="vendor/magnific-popup/magnific-popup-1.1.0.css" />

        <!-- standard presentation styles -->
        <link href="resources/css/style.css" rel="stylesheet" />

        <!-- custom presentation styles -->
        <link href="resources/css/custom.css" rel="stylesheet" />

        <!-- js needed in head -->

        <!-- greuler -->
        <script src="vendor/d3/d3-3.5.6.js"></script>
        <script src="vendor/cola/cola.v3.min.js"></script>
        <script src="vendor/greuler/greuler-0.5.5.min.js"></script>

        <!-- html5 dataset shim for IE -->
        <script src="vendor/impress/html5-dataset.js" type="text/javascript"></script>
        <!-- UnifrakturCook for Headers -->
        <link href="https://fonts.googleapis.com/css?family=UnifrakturCook:700|UnifrakturMaguntia"
            rel="stylesheet" />
    </head>
    <body>
        <div class="fallback-message">
            <p> Your browser <strong>doesn't support the features required</strong> by
                impress.mod.js, so you are presented with a simplified version of this presentation. </p>
            <p> For the best experience please use the latest <strong>Chrome</strong>,
                    <strong>Safari</strong> or <strong>Firefox</strong> browser. </p>
        </div>
        <div id="impress">
            <div class="step">
                <h5><strong>2018-10-17 | 18</strong> ADWL Mainz <a href="">TUSCRIPT</a>
                </h5>
                <h5>workshop <strong><a href=""> TUSCRIPT </a>
                    </strong></h5>
                <h2 class="red down-100">Einführung in die <code>TUSCRIPT</code></h2>
                <h3>Dateizugriffe mit der <code>TUSTEP</code>-Skriptsprache</h3>
                <h5 class="down-100"> Präsentation <a href="https://digicademy.github.io/tustep4Pi"
                        title="View the presentation online">
                        https://digicademy.github.io/2018_TUSCRIPT</a>
                    <br /> Code <a href="https://github.com/digicademy/2018_TUSCRIPT"
                        >https://github.com/digicademy/2018_TUSCRIPT</a>
                </h5>
                <h5>
                    <strong><a href="http://orcid.org/0000-0003-1904-1841">Thomas Kollatz</a>
                        <br />
                        <img src="resources/img/Twitter_bird_logo_2012.svg" alt="Twitter"
                            class="twitter-icon" />
                        <a href="https://twitter.com/kol_t" title="Thomas Kollatz on Twitter"
                            >@kol_t</a>
                        <a href="https://twitter.com/digicademy"
                            title="Digitale Akademie on Twitter">@digicademy</a>
                        <img src="resources/img/Octicons-mark-github.svg" alt="Twitter"
                            class="gh-icon" />
                        <a href="https://github.com/digicademy" title="digicademy on GitHub"
                            >digicademy</a> • <a href="https://creativecommons.org/licenses/by/4.0/"
                            >CC-BY 4.0</a></strong>
                </h5>
            </div>
            <div class="step">
                <h2 class="red">Grundlagen</h2>
                <h3>MODE TUSCRIPT</h3>
                <blockquote>Bei Makros, die neu erstellt werden, sollten grundsätzlich die Modi <code>TUSCRIPT</code> und <code>{}</code> eingestellt werden:
                    <pre><code>$$ MODE TUSCRIPT, {}</code></pre>
                    Damit werden die <code>Modi VARIABLE</code> und <code>STATEMENT</code>, für die Steuerzeichen »Dollar«, »Klammern« und »Apostroph«, das Dollarzeichen, die geschweiften Klammern bzw. der Apostroph sowie der Modus »<code>{}</code>« eingestellt.</blockquote><p class="right x-small"><a href="data/handbuch.pdf">Handbuch, S. 411</a></p>
                <h4><code>MODETUSCRIPT</code></h4>
                <pre><code><span class="red">$$ MODE TUSCRIPT,{}</span>
time=TIME()
PRINT time
<span class="substep">time=TIME()
PRINT/COLOR:EC "aktuelle Uhrzeit: ",time</span></code></pre>
                
            </div>
            <div class="step"><h2 class="red">Makroanweisungen I</h2>
                <div class="row"><div class="two columns"><dl class="medium down-25"><dt>TIME</dt><dd/>
                <dt>SPLIT</dt><dd/><dt>EXCHANGE</dt><dd/><dt>CONCAT</dt><dd/><dt>JOIN</dt><dd/></dl> <dl class="medium down-25"><dt>S_TABLE</dt><dt/><dt>X_TABLE</dt><dd/></dl></div><div class="ten columns">
                <pre ><code class="linenumbers">$$ MODE TUSCRIPT,{}
time=TIME()
PRINT time

-- SPLIT
time_split=SPLIT (time,"~ ~")
TRACE *time_split

time_cnt=SPLIT (time,"~ ~"|,datum,uhrzeit)
TRACE *datum,uhrzeit

-- S_TABLE
BUILD S_TABLE trenner=*
DATA ~ ~:~-~

time_split=SPLIT (time,trenner)
TRACE *time_split
time_cnt=SPLIT (time,trenner,yyyy,mm,dd,hour,min,sec)
TRACE *yyyy,mm,dd,hh,mm,ss

-- X_TABLE
BUILD X_TABLE monate=*
DATA  10 Oktober
DATA  11 November

-- EXCHANGE
monat=EXCHANGE (mm,monate)
TRACE *monat

-- CONCAT
tagesdatum=CONCAT (dd,". ",monat," ",yyyy)
PRINT tagesdatum

-- JOIN
datum_joined=JOIN(dd,".",mm,yyyy)
PRINT datum_joined
</code></pre><p class="x-small right"><code>makros_01</code></p>
 </div></div>           </div>
            <div class="step"><h2 class="red">MODE DATA</h2>
                <blockquote>Mit der Anweisung
                    <code>$$ MODE DATA</code>
                    kann eingestellt werden, dass nicht gekennzeichnete Zeilen als Daten angesehen werden. Anweisungszeilen müssen in diesem Fall mit zwei Dollarzeichen gekennzeichnet sein.</blockquote>
            
                <div class="row">
                    <div class="six columns">
                        <h3 class="down-50">MODE TUSCRIPT + MODE DATA </h3>
<pre><code class="linenumbers">$$ MODE TUSCRIPT,{}
time=TIME()
<span class="red">MODE DATA</span>
$$ SET/DATA vornamen
Max
Dominik
Hans-Werner
Marjam
$$ ENDDATA
<span class="red">$$ MODE TUSCRIPT,{}</span>
TRACE *vornamen
</code></pre>
                    </div>
                <div class="six columns">
                    <h3 class="down-50">MODE TUSCRIPT</h3>
<pre><code class="linenumbers">$$ MODE TUSCRIPT,{}
time=TIME()
SET/DATA vornamen
<span class="red">DATA</span> Max Grüntgens
<span class="red">DATA</span> Thomas Kollatz
<span class="red">DATA</span> Hans-Werner Bartz
ENDDATA
TRACE *vornamen
</code></pre>                    
                </div></div></div>
            <div class="step">
                <h2 class="red">Arbeiten mit Segmentdateien</h2>
                <table class="x-small">
                    <tr>
                        <td>Anmelden der Segmentdatei auf Kommandoebene</td>
                        <td><pre><code>#an,,skripte</code></pre></td>
                    </tr>
                    
                    <tr>
                        <td>Öffnen der Standard-Tustep-Editordatei tustep.edt</td>
                        <td><pre><code>#e,-std-</code></pre></td>
                    </tr>
                    <tr>
                        <td>Inhaltsverzeichnis der Segmentdatei im Editor anzeigen</td>
                        <td><pre><code>h,skripte,?</code></pre></td>
                    </tr>
                    <tr>
                        <td>Segment holen</td>
                        <td><pre><code>h,skripte,request </code>oder<code>h,skripte,1</code></pre></td>
                    </tr>
                    <tr>
                        <td> Segment ausführen</td>
                        <td><pre><code>x, #ma,&lt;editor&gt;</code></pre></td>
                    </tr>
                </table>
            </div>
            <div class="step">
                <h2 class="red">Definierte Segmentdatei</h2>
                <table class="x-small">
                    <tr>
                        <td>Anmelden der Segmentdatei auf Kommandoebene</td>
                        <td><pre><code>#an,,skripte</code></pre></td>
                    </tr>
                    <tr>
                        <td>Definieren der Segmentdatei</td>
                        <td><pre><code>#de,skripte</code></pre></td>
                    </tr>
                    <tr>
                        <td>Inhaltsverzeichnis einer definierten Segmentdatei anzeigen</td>
                        <td><pre><code>#in,$</code></pre></td>
                    </tr>
                    <tr>
                        <td>Ausführen eines Skripts aus einer definierten Segmentdatei</td>
                        <td><pre><code>#$request</code></pre></td>
                    </tr>
                    <tr>
                        <td>Segment in eine Editordatei holen</td>
                        <td><pre><code>h,skripte,request </code>oder<code>h,skripte,1</code> oder <code>h,$,1</code></pre> </td>
                    </tr>
                </table>
            </div>
            <div class="step">
                <h2 class="red">Dateizugriffe</h2>
                <ul class="line-height-one-five">
                    <li>Zugriff auf Webinhalte READ|WRITE STREAM/VARIABLE</li>
                    <li>Dateien mit &lt;tags&gt; <code>READ|WRITE STREAM</code></li>
                    <li>Zeilenweise <code>READ|WRITE RECORDS</code></li>
                    <li>Dateien mit definierten Dateistrukturen <code>READ|UPDATE|WRITE structures</code></li>
                </ul>
            </div>
            <div class="step">
                <h2 class="red">Zugriff auf XML-Datei</h2>
                <pre><code class="linenumbers">$$ MODE TUSCRIPT,{}
files=FILE_NAMES (-,TUSTEP_DSK)
xmlfile=FILTER (files,":*.xml:",-)
sz_xmlfile=SIZE(xmlfile)
IF (sz_xmlfile>1) STOP
status=OPEN (xmlfile,READ,-std-)
ACCESS q: READ/STREAM/UTF8 $xmlfile s,a+t+e,typ,stack,stack_num
 LOOP/99999
 READ/EXIT q
  TRACE *a
 ENDLOOP
ENDACCESS/PRINT q
</code></pre>
                <p class="x-small right"><code>access_xml</code></p>
            </div>
            <div class="step">
                <h2 class="red">#*import</h2>
<pre><code class="linenumbers">
filename=EXTRACT (xmlfile,0," . ")
zielname=CONCAT (filename,".tf")
status=CREATE (zielname,seq-o,-std-)
EXECUTE #*import,{xmlfile},{zielname},lo=+,ig=-
ACCESS q: READ/STREAM $zielname s.z/u,a+t+e,stack,stack_num
LOOP/99999
 READ/EXIT q
 TRACE *a
ENDLOOP
ENDACCESS/PRINT q
</code></pre>
                <p class="x-small right"><code>access_xml</code></p>
            </div>
            <div class="step">
                <h2 class="red">RTF-Datei importieren</h2>
                <pre><code class="linenumbers">$$ MODE TUSCRIPT,{}
INCLUDE "skripte" define
rtffiles=FILTER (files," *.rtf ",-)
TRACE *rtffiles
LOOP n,rtf=rtffiles
 path2rtffile=ADJUST_PATH (dsk,rtf)
 DEFINE "rtffile" = path2rtffile
 status=OPEN ("rtffile",READ,-)
 importquelle=CONCAT ("import",n,".rtf")
 status=CREATE (importquelle,FDF-o,-std-)
 status=COPY ("rtffile",importquelle)
 importziel=CONCAT ("import",n,".tf")
 status=CREATE (importziel,SEQ-o,-std-)
 EXECUTE #*import,{importquelle},{importziel},lo=+,ig=-
 status=DELETE (importquelle)
 status=CLOSE ("rtffile")
ENDLOOP</code></pre>
                <p class="x-small right"><code>importrtf</code></p>
            </div>
            <div class="step">
                <h2 class="red">Zugriff auf Webinhalte </h2>
                
                        <pre><code class="linenumbers">$$ MODE TUSCRIPT,{}
url="https://textgridlab.org/1.0/tgcrud-public/rest/textgrid:11g9q.0/data"

daten=REQUEST (url)
-- INCLUDE "skripte" tables
ACCESS q: READ/STREAM/VARIABLE/UTF8 daten s,a+t+e,typ,stack,stack_num
LOOP/99999
READ/EXIT q
IF (t.ct." Hexen-Einmaleins ") TRACE *stack_num
-- IF (stack_num.ct.stack_hexe) PRINT/COLOR:F0 t
ENDLOOP
ENDACCESS/PRINT q
</code></pre>
                        <p class="x-small right"><code>hexerei</code></p>
            <table>
                <tr><td>.ct.</td><td>contains</td></tr>
                <tr><td>.nc.</td><td>not contains</td></tr>
                <tr><td>.hn.</td><td>has name</td></tr>
                <tr><td>.ha.</td><td>has attribute</td></tr>
                <tr><td>.sw.</td><td>starts with</td></tr>
                <tr><td>.ew.</td><td>ends with</td></tr>
                <tr><td>'digit'</td><td>is digit</td></tr>
 
            </table>
                <p class="x-small right"><a href="data/handbuch.pdf">Handbuch</a> S. 457-463</p>
            </div>
            
            <div class="step">
                <h2>WRITE/STRUCTURES</h2>
                <blockquote>Daten mit definierten Dateistrukturen</blockquote>
                <p class="right x-small"></p>
            </div>
            <div class="step">
                <h2 class="red">Zählen und Suchen</h2>
                <code class="small">FIND/NEXT d (anf,end,trenn,tausch; pos1,pos2,pos3; neg1,neg2,neg3; wdh)</code>
                <div class="row">
                    <div class="four columns ">
                
                <blockquote class="small">Beim <strong>Suchen</strong> von Texteinheiten werden alle Sätze einer Texteinheit zu einer einzigen Zeichenfolge zusammengefasst; dann wird geprüft, ob diese Zeichenfolge die Suchbedingungen erfüllt.</blockquote>
                        <p class="right x-small"><a href="data/handbuch.pdf">Handbuch</a>, S. 598</p>  </div>
                    <div class="eight columns">              
                <blockquote class="small">Die Anweisung <code>COUNT</code> zum Zählen bestimmter Texteinheiten entspricht […] der Anweisung <code>FIND</code> zum Suchen einer bestimmten Texteinheit [...]. Es wird derselbe Datenbereich wie bei der FIND-Anweisung durchsucht. Jedoch wird nicht nur die erste Texteinheit gesucht, die die Suchbedingungen erfüllt, sondern festgestellt, wieviele Texteinheiten insgesamt die Suchbedingung erfüllen.</blockquote><p class="right x-small"><a href="data/handbuch.pdf">Handbuch</a>, S. 600</p>
                    
                    </div></div>
                <h3><code>count_find</code></h3>
                <pre><code class="linenumbers">$$! suche=eins
$$ MODE TUSCRIPT,{}
file="testdatei"
BUILD R_TABLE/BLANK/EXACT suche=$suche
ACCESS q: READ/RECORDS $file s.z/u,zeile,anz,bla

COUNT/NEXT q (-;suche;-;-)
IF (anz==0) STOP

PRINT "Zählergebnis"
PRINT "In ", anz," von ",s," Sätzen wurde das Suchwort gefunden"

SET s=anz=0
PRINT " "
PRINT "Findergebnis"
LOOP
 FIND/NEXT/EXIT q (-;suche;-;-)
 zeileneu=HIGHLIGHT (zeile,suche,0,0,"<b>","</b>")
 PRINT s,".",z,": ",zeileneu
ENDLOOP
ENDACCESS q
</code></pre>
            </div>
            <!--<div class="step">
                <div class="row">
                    <div class="six columns"><h2 class="red">###</h2>
                        <figure class="mfp-lightbox"><a href=""><img src="" /></a>
                        </figure>
                    </div><div class="six columns">
                        <ul class="line-height-one-five">
                            <li></li>
                        </ul>
                    </div>
                </div>
            </div>-->
            <div class="step" id="literature">
                <h2 class="red">Software &amp; Literatur</h2>
                <h4>Software</h4>
                <ul class="small line-height-one-five">
                    <li>
                        <a href="https://github.com/impress/impress.js">Impress.js</a>
                        (Präsentation) </li>
                    <li>
                        <a href="https://github.com/dimsemenov/Magnific-Popup">Magnific Popup</a>
                        (Lightbox) </li>
                </ul>
            </div>
            <div class="step">
                <h2 class="red centered">DEMO</h2>
            </div>
            <div class="step">
                <div class="centered">
                    <h1 class="red">F I N I S</h1>
                    <h2>סוף דבר הכל נשמע</h2>
                </div>
                <div class="centered down-100">
                    <h3>
                        <a href="#literature">Software und Literatur</a></h3><p class="x-small"></p>
                </div>
            </div>
        </div>
        <!-- jquery -->
        <script src="vendor/jquery/jquery-1.11.0.min.js"></script>
        <!-- unite gallery -->
        <script type="text/javascript" src="vendor/unitegallery/js/unitegallery.min.js"></script>
        <script type="text/javascript" src="vendor/unitegallery/themes/tiles/ug-theme-tiles.js"></script>
        <script type="text/javascript" src="resources/js/unite.gallery.js"></script>
        <!-- chartist -->
        <script src="vendor/chartist/chartist.min-0.9.7.js"></script>
        <script src="resources/js/chartist.charts.js"></script>
        <!-- codemirror -->
        <script src="vendor/codemirror/lib/codemirror.js"></script>
        <script src="vendor/codemirror/addon/edit/matchbrackets.js"></script>
        <script src="vendor/codemirror/mode/sparql/sparql.js"></script>
        <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("sparql"), {
            mode: "application/sparql-query",
            matchBrackets: true,
            lineNumbers: true,
            viewportMargin: Infinity
        });
        </script>
        <!-- highlight -->
        <script src="vendor/highlight/highlight.pack-9.3.0.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="resources/js/hljs.linenumbering.js"></script>
        <!-- swiper -->
        <script src="vendor/swiper/swiper.min.js"></script>
        <script>
        var swiper = new Swiper('.swiper-container', {
            pagination: '.swiper-pagination',
            paginationClickable: true,
            nextButton: '.swiper-button-next',
            prevButton: '.swiper-button-prev',
            spaceBetween: 30,
            hashnav: true
        });
        </script>
       <!-- magnific popup -->
        <script src="vendor/magnific-popup/jquery.magnific-popup.min-1.1.0.js"></script>
        <script src="resources/js/magnific-popup.lightbox.js"></script>
        <!-- impress.mod.js -->
        <script src="vendor/impress/impress.fork.js"></script>
        <script src="vendor/impress/impress-slidenum.js"></script>
        <script>
        var obj = impress();
        obj.init();
        initSlideNo(obj);
        </script>
        <!-- Links to TEI-Documentation -->
        <script src="resources/js/tei-documentation-links.js">
        </script>
    </body>
</html>